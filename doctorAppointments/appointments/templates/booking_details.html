{% extends 'base.html' %} {% load static %} {% block content %}
<section>
  <article>
    <h1>Update Booking</h1>
    <form method="post" id="updateForm">
      {% csrf_token %} {{ form.as_p }}
      <div style="display: flex; gap: 16px">
        <button type="submit">Update</button>
        <button id="deleteButton">Delete</button>
      </div>
    </form>

    <script>
      document.getElementById("updateForm").onsubmit = async function (event) {
        event.preventDefault();
        let formData = new FormData(this);
        let data = {};
        formData.forEach((value, key) => {
          data[key] = value;
        });
        let response = await fetch("", {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "X-CSRFToken": "{{ csrf_token }}",
          },
          body: JSON.stringify(data),
        });
        if (response.ok) {
          alert("Booking updated successfully!");
          window.location.href = '{% url "home" %}';
        } else {
          alert("Failed to update booking.");
        }
      };

      document.getElementById("deleteButton").onclick = async function () {
        if (confirm("Are you sure you want to delete this booking?")) {
          let response = await fetch("", {
            method: "DELETE",
            headers: {
              "X-CSRFToken": "{{ csrf_token }}",
            },
          });
          if (response.ok) {
            alert("Booking deleted successfully!");
            window.location.href = '{% url "home" %}';
          } else {
            alert("Failed to delete booking.");
          }
        }
      };
    </script>
  </article>
</section>
{% endblock %}
